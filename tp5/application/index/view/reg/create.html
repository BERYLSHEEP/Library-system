{extend name='./common/father' /}
{block name='content'}
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">注册</h3>
    </div>
    <div class="panel-body">
        <form action="" method="post" class="form-horizontal" role="form">
            <div class="form-group">
                <label  class="col-sm-2 control-label">学号/学工号:</label>
                <div class="col-sm-10">
                    <input type="text" name="ReaderID" id="ReaderID" class="form-control" >
                </div>
            </div>
             <div class="form-group">
                <label  class="col-sm-2 control-label">邮箱:</label>
                <div class="col-sm-10">
                    <input type="text" name="mail" id="mail" class="form-control" value="">
                </div>
            </div>
            <div class="form-group">
                <label  class="col-sm-2 control-label">密码:</label>
                <div class="col-sm-10">
                    <input type="password" name="Password" id="Password" class="form-control" value="">
                </div>
            </div>
            <div class="form-group">
                <label  class="col-sm-2 control-label">确认密码:</label>
                <div class="col-sm-10">
                    <input type="password" name="Password_confirm" id="Password_confirm" class="form-control" value="">
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-10 col-sm-offset-2">
                    <button id="reg"  type="button" class="btn btn-primary">立即注册</button>
                </div>
            </div>
        </form>
    </div>
</div>
               

<script>
    $(function(){
        $("#reg").click(function(){
            //console.log($("#ReaderID").val());
            $.ajax({
                type: "post",
                url: "/register",
                dataType:'json',
                async:false,
                data:{"id":$("#ReaderID").val(),"mail":$("#mail").val(),"Password":$("#Password").val(),"Password_confirm":$("#Password_confirm").val()},
                success: function(data) {
                    let parseData = JSON.parse(data);
                    if (parseData["responseStatus"] === 0) {
                        window.parent.alert("注册成功");
                        window.location.href="http://localhost:8080/";
                    } else {
                        window.parent.alert(parseData["errorMessage"]);
                    }
                }
            });
        });
    });

</script>
{/block}